{% extends "base.html" %}
{% block title %}Sign Up{% endblock %}

{% block content %}
<div class="max-w-md mx-auto mt-16">
  <div class="bg-white shadow-xl rounded-2xl px-8 py-10">
    <h1 class="text-3xl font-semibold text-gray-800 text-center mb-8">
      Create your account
    </h1>

    <form method="post" class="space-y-6">
      {% csrf_token %}
      {{ form.non_field_errors }}

      <!-- Username -->
      <div class="mb-6">
        {{ form.username.label_tag }}
        {{ form.username }}
        {{ form.username.errors }}
      </div>

      <!-- Full name -->
      <div class="mb-6">
        {{ form.name.label_tag }}
        {{ form.name }}
        {{ form.name.errors }}
      </div>

      <!-- Email -->
      <div class="mb-6">
        {{ form.email.label_tag }}
        {{ form.email }}
        {{ form.email.errors }}
      </div>

      <!-- Phone -->
      <div class="mb-6">
        {{ form.phone.label_tag }}
        {{ form.phone }}
        {{ form.phone.errors }}
      </div>

      <!-- User Type -->
      <div class="mb-6">
        {{ form.user_type.label_tag }}
        {{ form.user_type }}
        {{ form.user_type.errors }}
      </div>

      <!-- Company name (only for agency) -->
      <div id="div_id_company_name" class="mb-6 agency-field">
        {{ form.company_name.label_tag }}
        {{ form.company_name }}
        {{ form.company_name.errors }}
      </div>

      <div id="div_id_license_number" class="mb-6 agency-field">
        {{ form.license_number.label_tag }}
        {{ form.license_number }}
        {{ form.license_number.errors }}
      </div>

      <div id="div_id_street" class="mb-6 agency-field">
        {{ form.street.label_tag }}
        {{ form.street }}
        {{ form.street.errors }}
      </div>

      <div id="div_id_city" class="mb-6 agency-field">
        {{ form.city.label_tag }}
        {{ form.city }}
        {{ form.city.errors }}
      </div>

      <div id="div_id_postal_code" class="mb-6 agency-field">
        {{ form.postal_code.label_tag }}
        {{ form.postal_code }}
        {{ form.postal_code.errors }}
      </div>

      <!-- Password -->
      <div class="mb-6">
        {{ form.password1.label_tag }}
        {{ form.password1 }}
        {{ form.password1.errors }}
      </div>

      <!-- Confirm Password -->
      <div class="mb-6">
        {{ form.password2.label_tag }}
        {{ form.password2 }}
        {{ form.password2.errors }}
      </div>

      <button type="submit"
              class="w-full py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg">
        Sign up
      </button>
    </form>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const userTypeSelect   = document.getElementById('id_user_type');
    const agencyFields     = document.querySelectorAll('.agency-field');

    function toggleAgencyFields() {
      const show = userTypeSelect.value === 'agency_seller';
      agencyFields.forEach(div => {
        div.style.display = show ? '' : 'none';
      });
    }

    userTypeSelect.addEventListener('change', toggleAgencyFields);
    toggleAgencyFields();  // initial check on page load
  });
</script>
{% endblock %}
