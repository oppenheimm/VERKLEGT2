{% extends 'base.html' %}

{% block title %}Notifications{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-8">
  <h1 class="text-2xl font-semibold mb-6">Notifications</h1>

  {% if user.user_type == 'individual_seller' or user.user_type == 'agency_seller' %}
    <h2 class="text-xl font-bold mb-4">Offers on Your Properties</h2>
    {% if owner_offers %}
      {% for offer in owner_offers %}
        <div class="p-4 bg-white rounded shadow mb-4">
          <p><strong>Property:</strong> {{ offer.property.title }}</p>
          <p><strong>From:</strong> {{ offer.buyer.username }}</p>
          <p><strong>Amount:</strong> {{ offer.amount|floatformat:"2" }} kr</p>
          <p><strong>Status:</strong> {{ offer.get_status_display }}</p>
          <p class="text-sm text-gray-500">Submitted on {{ offer.created_at|date:"F j, Y, g:i a" }}</p>
        </div>
      {% endfor %}
    {% else %}
      <p>No offers yet on your properties.</p>
    {% endif %}
  {% endif %}

  {% if user.user_type == 'buyer' %}
    <h2 class="text-xl font-bold mt-8 mb-4">Your Purchase Offers</h2>
    {% if buyer_offers %}
      {% for offer in buyer_offers %}
        <div class="p-4 bg-white rounded shadow mb-4">
          <p><strong>Property:</strong> {{ offer.property.title }}</p>
          <p><strong>Amount:</strong> {{ offer.amount|floatformat:"2" }} kr</p>
          <p><strong>Status:</strong> 
            {% if offer.status == 'accepted' %}
              <span class="text-green-600 font-semibold">Accepted</span>
            {% elif offer.status == 'declined' %}
              <span class="text-red-600 font-semibold">Declined</span>
            {% else %}
              <span class="text-gray-600">Pending</span>
            {% endif %}
          </p>
          <p class="text-sm text-gray-500">Submitted on {{ offer.created_at|date:"F j, Y, g:i a" }}</p>
        </div>
      {% endfor %}
    {% else %}
      <p>You have not made any offers yet.</p>
    {% endif %}
  {% endif %}
</div>
{% endblock %}
