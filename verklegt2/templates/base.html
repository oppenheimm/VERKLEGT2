<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}Castle Apartments | Find Perfect Property{% endblock %}
    </title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: { sans: ["Inter", "ui-sans-serif", "system-ui"] },
            colors: {
              brand: { DEFAULT: "#4f46e5", light: "#eef2ff" },
              dark: { DEFAULT: "#0f0e3c", 700: "#1a1a70" },
            },
          },
        },
      };
    </script>
    {% block extra_head %}{% endblock %}
  </head>

  <body class="font-sans antialiased text-slate-900 flex flex-col min-h-screen">
    <!-- Header (unchanged) -->
    <header class="bg-brand-light">
      <div class="container mx-auto max-w-7xl px-6 py-6 flex items-center justify-between w-full">
        <a href="/" class="flex items-center gap-2 text-xl font-bold">
          <span class="text-2xl">üè∞</span> Castle Apartments
        </a>

        {% if request.user.is_authenticated %}
        <div class="flex gap-4 items-center">
          <a href="{% url 'dashboard:notifications' %}" class="relative">
            <!-- Notification Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700 hover:text-brand transition" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405a2.032 2.032 0 00-.595-1.405L18 13V8a6 6 0 10-12 0v5l-.001.19a2.032 2.032 0 00-.595 1.405L3 17h5m7 0v1a3 3 0 11-6 0v-1m6 0H9" />
            </svg>
            <span class="absolute top-0 right-0 block h-2 w-2 rounded-full ring-2 ring-white bg-red-600"></span>
          </a>
          <a href="{% url 'users:profile' %}">
            <!-- Profile Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-700 hover:text-brand transition" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 14a4 4 0 01-8 0m8-4a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
          </a>
          {% if request.user.user_type == 'individual_seller' or request.user.user_type == 'agency_seller' %}
          <a href="{% url 'dashboard:dashboard' %}">
            <!-- Dashboard Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-700 hover:text-brand transition" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h7v7H3V3zm0 11h7v7H3v-7zm11-11h7v7h-7V3zm0 11h7v7h-7v-7z" />
            </svg>
          </a>
          {% endif %}
        </div>
        {% else %}
        <div class="flex gap-4">
          <a href="{% url 'users:login' %}" class="px-5 py-2 rounded-lg border-2 border-brand font-semibold hover:bg-brand hover:text-white transition">Login</a>
          <a href="{% url 'users:signup' %}" class="px-5 py-2 rounded-lg bg-brand text-white font-semibold hover:opacity-90 transition">Sign up</a>
        </div>
        {% endif %}
      </div>
    </header>

    <!-- Page Content -->
    <main class="flex-1">
      {% block content %}{% endblock %}
    </main>

    <!-- Footer (relative, anchors bottom because of flex column) -->
    <footer class="bg-gray-800 text-gray-300 w-full border-t border-brand py-4">
      <div class="container mx-auto max-w-7xl px-6 flex flex-col md:flex-row items-center justify-between gap-4">
        <p class="text-xs md:text-sm">&copy; {% now "Y" %} Castle Apartments.</p>

        <nav class="flex items-center gap-4 text-xs md:text-sm">
          <a href="{% url 'core:index' %}" class="hover:text-white">Home</a>
          <a href="{% url 'core:contact' %}" class="hover:text-white">Contact</a>
          {% if request.user.is_authenticated %}
            <a href="{% url 'dashboard:dashboard' %}" class="hover:text-white">Dashboard</a>
          {% endif %}
          <!-- tiny social sauce -->
          <a href="https://twitter.com" target="_blank" class="hover:text-brand-light">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M22.46 6c-.77.35-1.6.58-2.46.69a4.3 4.3 0 001.9-2.37 8.59 8.59 0 01-2.74 1.05 4.29 4.29 0 00-7.32 3.91A12.17 12.17 0 013 5.16a4.29 4.29 0 001.32 5.73 4.25 4.25 0 01-1.94-.54v.05a4.29 4.29 0 003.44 4.2 4.3 4.3 0 01-1.94.07 4.29 4.29 0 004.01 2.98A8.61 8.61 0 012 19.54 12.14 12.14 0 008.29 21c7.55 0 11.68-6.26 11.68-11.68 0-.18-.01-.35-.02-.53A8.35 8.35 0 0022.46 6z"/></svg>
          </a>
        </nav>
      </div>
    </footer>
  </body>
</html>
